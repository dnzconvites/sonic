<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sonic</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:image" content="capa.png">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{background:#000;font-family:sans-serif;overflow-x:hidden}

#capa{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#000;z-index:20}
#capa img{max-width:100%;max-height:100vh}
#abrirConvite{position:absolute;inset:0;border:0;background:none}

.convite-main{min-height:100vh;display:flex;align-items:center;justify-content:center}
.convite-stage{position:relative;width:min(100vw,56.25vh);height:min(100vh,177.78vw);max-width:480px;max-height:853px}
#video{width:100%;height:100%;object-fit:contain;background:#000}

#botoesConvite{position:absolute;inset:0;z-index:2}
#botoesConvite a{position:absolute;width:20%;height:12%;transform:translate(-50%,-50%)}

#filtro{top:47.92%;left:83.33%}
#dress{top:63.54%;left:83.33%}
#sugestoes{top:85.42%;left:83.33%}
#local{top:81.25%;left:19%}
#presenca{top:81.25%;left:51.85%}

.overlayConvite{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,.85);z-index:10000}
.overlayConvite img{max-width:92vw;max-height:92vh}
.fecharOverlay{position:absolute;top:12px;right:20px;background:#000;color:#fff;border:0;font-size:22px;padding:4px 12px}

#toastPix{
display:none;
position:fixed;
bottom:7%;
left:50%;
transform:translateX(-50%);
background:#000;
color:#fff;
padding:10px 16px;
border-radius:10px;
z-index:10001;
font-weight:600;
}
</style>
</head>

<body>

<div id="capa">
<img src="capa.png">
<button id="abrirConvite"></button>
</div>

<main class="convite-main">
<div class="convite-stage">

<video id="video" playsinline muted preload="metadata">
<source src="video.mp4" type="video/mp4">
</video>

<div id="botoesConvite">
<a id="filtro"></a>
<a id="dress"></a>
<a id="local" href="https://maps.app.goo.gl/GckE7g8dz9v5a5Gv7" target="_blank"></a>
<a id="presenca" href="https://wa.me/5511989957305?text=Ol%C3%A1%2C%20gostaria%20de%20confirmar%20minha%20presen%C3%A7a!" target="_blank"></a>
<a id="sugestoes"></a>
</div>

</div>
</main>

<div id="overlayPix" class="overlayConvite">
<button class="fecharOverlay" data-close="#overlayPix">×</button>
<img src="presentes.png" id="pixImage">
</div>

<div id="toastPix">✨ Chave Pix copiada!</div>

<audio id="musica" src="musica.mp3" loop></audio>

<script>
const abrir=document.getElementById("abrirConvite")
const capa=document.getElementById("capa")
const video=document.getElementById("video")
const musica=document.getElementById("musica")

let abaixou=false
let voltou=false

function fadeVolume(audio, alvo, duracao=800){
const passo=(alvo-audio.volume)/(duracao/50)
const intervalo=setInterval(()=>{
audio.volume+=passo
if((passo>0 && audio.volume>=alvo)||(passo<0 && audio.volume<=alvo)){
audio.volume=alvo
clearInterval(intervalo)
}
},50)
}

abrir.onclick=()=>{
capa.style.display="none"
video.play()
musica.volume=0
musica.play()

let v=0
const fade=setInterval(()=>{
v+=0.05
musica.volume=v
if(v>=0.8)clearInterval(fade)
},180)
}

video.addEventListener("play",()=>{
abaixou=false
voltou=false
})

video.addEventListener("timeupdate",()=>{

if(video.currentTime>=4 && !abaixou){
fadeVolume(musica,0.15)
abaixou=true
}

if(video.currentTime>=17 && !voltou){
fadeVolume(musica,0.8)
voltou=true
}

})

const open=id=>{
document.querySelector(id).style.display="flex"
document.body.style.overflow="hidden"
}
const close=id=>{
document.querySelector(id).style.display="none"
document.body.style.overflow=""
}

document.getElementById("sugestoes").onclick=e=>{
e.preventDefault()
open("#overlayPix")
}

document.addEventListener("click",e=>{
const btn=e.target.closest("[data-close]")
if(btn)close(btn.dataset.close)
})

const chavePix="#5511989957305"
const toast=document.getElementById("toastPix")

async function copiarPix(texto){
try{
await navigator.clipboard.writeText(texto)
}catch{
const ta=document.createElement("textarea")
ta.value=texto
document.body.appendChild(ta)
ta.select()
document.execCommand("copy")
document.body.removeChild(ta)
}
toast.style.display="block"
setTimeout(()=>toast.style.display="none",1600)
}

document.getElementById("pixImage").onclick=()=>{
copiarPix(chavePix)
}
</script>

</body>
</html>
